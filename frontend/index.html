<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Список узлов</title>
</head>
<body>
    <h1>Узлы</h1>
    <div id="nodes"></div>
    
    <script>
        // Функция для выполнения HTTP-запроса
        function fetchNodes() {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', '/user/node/list');
                xhr.onload = () => resolve(JSON.parse(xhr.responseText));
                xhr.onerror = () => reject(new Error('Ошибка загрузки данных'));
                xhr.send();
            });
        }
        
        // Отображение узлов в виде ссылок
        async function displayNodes() {
            try {
                const nodes = await fetchNodes();
                
                let linksHTML = '';
                for (let i = 0; i < nodes.length; i++) {
                    const node = nodes[i];
                    linksHTML += `
                        <p>
                            <a href="#" onclick="window.open('/term.html?nodeId=${encodeURIComponent(node)}'); return false;">(${node})</a>
                        </p>\n`;
                }
                
                document.getElementById('nodes').innerHTML = linksHTML;
            } catch (err) {
                console.error(err);
                alert('Произошла ошибка при загрузке данных.');
            }
        }
        
        // Вызываем функцию сразу после загрузки страницы
        window.addEventListener('DOMContentLoaded', displayNodes);
    </script>
</body>
</html>